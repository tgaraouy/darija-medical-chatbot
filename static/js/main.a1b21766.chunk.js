(this["webpackJsonpdarija-medical-chatbot"]=this["webpackJsonpdarija-medical-chatbot"]||[]).push([[0],{103:function(e,a,t){e.exports=t(117)},111:function(e,a,t){},117:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),l=t(28),s=t.n(l),c=(t(111),t(182)),o=t(64),i=t(181),m=t(188),u=t(190),h=t(183),d=t(173),E=t(184),g=t(191),p=t(185),f=t(179),y=t(186),v=t(187),b=t(194),w=t(174),j=t(178);var x=function(){const[e,a]=Object(r.useState)([]),[t,l]=Object(r.useState)(""),[s,x]=Object(r.useState)(!1),[S,k]=Object(r.useState)(null),[_,O]=Object(r.useState)(!1),[C,T]=Object(r.useState)("darija"),I=Object(r.useRef)(null);Object(r.useEffect)(()=>{_||(W("Merhba! Ana l'assistant dyalk l'Darija Medical Terms. Kifach n9der n3awnek lyum?"),O(!0))},[_]),Object(r.useEffect)(()=>{D()},[e]);const W=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;a(a=>[...a,{text:e,isBot:!0,terms:t}])},D=()=>{I.current&&I.current.scrollIntoView({behavior:"smooth"})},q=(e,a)=>{if("speechSynthesis"in window){const t=new SpeechSynthesisUtterance(e);t.lang=a,window.speechSynthesis.speak(t)}else console.error("Text-to-speech not supported in this browser")};return n.a.createElement(c.a,null,n.a.createElement(o.a,{variant:"h4",sx:{my:2}},"Darija Medical Terms Chatbot"),S&&n.a.createElement(i.a,{severity:"error",sx:{mb:2}},S),n.a.createElement(m.a,{sx:{height:"60vh",overflow:"auto",p:2,mb:2}},n.a.createElement(u.a,null,e.map((e,a)=>n.a.createElement(h.a,{key:a,sx:{justifyContent:e.isBot?"flex-start":"flex-end"}},n.a.createElement(m.a,{elevation:3,sx:{p:1,maxWidth:"70%",bgcolor:e.isBot?"grey.100":"primary.light"}},n.a.createElement(d.a,{primary:e.text,sx:{whiteSpace:"pre-wrap"}}),e.terms&&n.a.createElement(u.a,null,e.terms.map((e,a)=>n.a.createElement(h.a,{key:a},n.a.createElement(m.a,{elevation:1,sx:{p:1,width:"100%"}},n.a.createElement(o.a,{variant:"h6"},e.darija_medical_term),n.a.createElement(o.a,{variant:"body2"},"Category: ",e.category_french),n.a.createElement(o.a,{variant:"body2"},"French: ",e.term_french),n.a.createElement(o.a,{variant:"body2"},"English: ",e.term_english),n.a.createElement(o.a,{variant:"body2",sx:{mt:1}},"Description: ",e.contextual_description_french),n.a.createElement(o.a,{variant:"body2",sx:{mt:1}},"Example Scenario: ",e.example_scenario),n.a.createElement(E.a,{onClick:()=>q(e.darija_medical_term,"ar-MA"),size:"small",startIcon:n.a.createElement(w.a,null)},"Darija"),n.a.createElement(E.a,{onClick:()=>q(e.term_french,"fr-FR"),size:"small",startIcon:n.a.createElement(w.a,null)},"French"),n.a.createElement(E.a,{onClick:()=>q(e.term_english,"en-US"),size:"small",startIcon:n.a.createElement(w.a,null)},"English")))))))),n.a.createElement("div",{ref:I}))),n.a.createElement(g.a,{fullWidth:!0,sx:{mb:2}},n.a.createElement(p.a,null,"Language"),n.a.createElement(f.a,{value:C,onChange:e=>T(e.target.value),label:"Language"},n.a.createElement(y.a,{value:"darija"},"Darija"),n.a.createElement(y.a,{value:"french"},"French"),n.a.createElement(y.a,{value:"english"},"English"))),n.a.createElement("form",{onSubmit:async e=>{if(e.preventDefault(),""!==t.trim()){a(e=>[...e,{text:t,isBot:!1}]),l(""),x(!0),k(null);try{console.log(`Sending search request for "${t}" in ${C}`);const e=await fetch("http://localhost:5000/api/terms/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t,language:C})});if(!e.ok)throw new Error("HTTP error! status: "+e.status);const a=await e.json();console.log("Received response:",a),a.terms&&a.terms.length>0?(console.log(`Found ${a.terms.length} terms`),W("Here's what I found:",a.terms)):(console.log("No terms found"),W(a.message||"No terms found. Please try a different query."))}catch(S){console.error("Error processing query:",S),k(S.message),W("Sorry, there was an error processing your request. Please try again later.")}finally{x(!1)}}},style:{display:"flex"}},n.a.createElement(v.a,{fullWidth:!0,value:t,onChange:e=>l(e.target.value),placeholder:"Type your message here...",sx:{mr:1},disabled:s}),n.a.createElement(E.a,{type:"submit",variant:"contained",startIcon:n.a.createElement(j.a,null),disabled:s},s?n.a.createElement(b.a,{size:24}):"Send")))};s.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(e=>{console.log("Service Worker registered with scope:",e.scope)}).catch(e=>{console.error("Service Worker registration failed:",e)})})}},[[103,1,2]]]);
//# sourceMappingURL=main.a1b21766.chunk.js.map